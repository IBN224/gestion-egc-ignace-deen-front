<app-header></app-header>
<section>
  <div class="container">
    <br>
    <br>
    <br>
    <br>
      <div class="card">
      <div class="card-body">
        <div class="col-lg-1 col-md-1 col-sm-1"></div>
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="min-height: 400px;">
          <div class="row">
            <div class="col-md-6">
              <h3 class="news_head">RESULTATS - EXAMEN</h3>
            </div>
            <div class="col-md-6" style="text-align: right">
              <button class="btn btn-secondary btn-sm" (click)="logOut()">
                         <span class="btn-label">
                             <i class="fa fa-sign-out-alt"></i>
                         </span>
                Déconnexion
              </button>
            </div>
          </div>
          <ng-container *ngIf="(testResult$ | async) as result" [ngSwitch]="result.dataState">
            <ng-container *ngSwitchCase="DataSateEnum.LOADING">
              LOADING.....
            </ng-container>
            <ng-container *ngSwitchCase="DataSateEnum.ERROR">
              <div class="alert-danger">
                {{result.errorMessage}}
              </div>
            </ng-container>
            <ng-container *ngSwitchCase="DataSateEnum.LOADED">
              <table class="table table-responsive table-striped staf_in_tab">
                <tbody>
                <tr>
                  <th style="width:100px">Date</th>
                  <th style="width:80%">Description</th>
                  <th>Résultats</th>
                </tr>
                <tr *ngFor="let testResult of result.data">
                  <td>{{ testResult.date | date: 'dd/MM/yyyy' }}</td>
                  <td>{{ testResult.description }}</td>
                  <td>
                    <table>
                      <tbody>
                      <tr *ngFor="let doc of testResult.documents; index as i">
                        <td><a class="clickable" (click)="showDocument(doc.content)">Télécharger</a></td>
                      </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>
                </tbody>
              </table>
              <div class="text-center" *ngIf="result.data?.length==0">
                <i class="text-info">Aucune ligne trouvée.</i>
              </div>
            </ng-container>
          </ng-container>
        </div>
        <div class="col-lg-1 col-md-1 col-sm-1"></div>
      </div>
    </div>
  </div>
</section>
<app-footer></app-footer>
